<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>2021年给你的MacbookPro安装Ubuntu</title>
  <meta name="description" content="一、前面的话我的MacBookPro2010(后面称呼为mbp)之前不能用了。usb口接触不良，我以为就是永久了坏了。开机就非常卡，app一个没开风扇就呼呼的，MacOS也对他停止更新了。我以为这台设备就次废掉了。这里引入一个概念 计划性报废 就是为了企业的可持续发展，让你的老设备越来越慢，然后你会买新的 :D。...">
  <!-- evil icon -->

  <link rel="stylesheet" href="/assets/evil-icons.min.css">
  <script src="/assets/evil-icons.min.js"></script>

  <!-- todo: include this into main.css -->

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://mark24code.github.io/ubuntu/linux/%E6%95%99%E7%A8%8B/2021/02/06/2021%E5%B9%B4%E7%BB%99%E4%BD%A0%E7%9A%84MacbookPro%E5%AE%89%E8%A3%85Ubuntu%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html">
  <link rel="alternate" type="application/rss+xml" title="Mark24" href="https://mark24code.github.io/feed.xml">

  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5H3S9CQNF0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5H3S9CQNF0');
</script>


</head>

  <body>
    <div class="page-content">
      <div class="container">
        <div class="three columns">
          <header class="site-header">

  <h2 class="logo"><a href="/">Mark24</a></h2>
  <div class="description">记录灵感、技术、思考</div>

  <div class="nav">
    
    <label for="menu-toggle" class="menu-icon">
        <!--div data-icon="ei-navicon"></div-->
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
    </label>
    <input type="checkbox" id="menu-toggle">

    <div class="site-nav">
      <nav>
        <ul class="page-link">
          <li><a href="/">Home</a></li>
          <li><a href="/posts">Posts</a></li>
          <li><a href="/art">Art</a></li>
          <li><a href="https://speakerdeck.com/mark24code">Sliders</a></li>
          <li><a href="/sites">Sites</a></li>
          <li><a href="/feed.xml">RSS</a></li>
          <li><a href="/about">About</a></li>
        </ul>
      </nav>
    </div>

    <section class="small-font">
      
      <a href="https://github.com/Mark24Code"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a>

      
      
    </section>
  </div>
</header>

        </div>

        <div class="nine columns" style="z-index:100;">
          <div class="wrapper">
            <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="artilce_header">
    <h1 class="artilce_title" itemprop="name headline">2021年给你的MacbookPro安装Ubuntu</h1>
    <p class="artilce_meta"><time datetime="2021-02-06T10:50:22+08:00" itemprop="datePublished">Feb 6, 2021</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Mark24</span></span></p>
  </header>

  <div class="article-content" itemprop="articleBody">
    <h1 id="一前面的话">一、前面的话</h1>

<p>我的MacBookPro2010(后面称呼为mbp)之前不能用了。usb口接触不良，我以为就是永久了坏了。开机就非常卡，app一个没开风扇就呼呼的，MacOS也对他停止更新了。</p>

<p>我以为这台设备就次废掉了。</p>

<p>这里引入一个概念 <a href="https://baike.baidu.com/item/%E8%AE%A1%E5%88%92%E6%8A%A5%E5%BA%9F/8582720?fr=aladdin">计划性报废</a> 就是为了企业的可持续发展，让你的老设备越来越慢，然后你会买新的 :D。</p>

<p>好吧，这些都是铺垫。</p>

<p>最重要是当你愿意折腾给他换个系统比如Ubuntu，他的一切毛病都消失了。这就是计划性报废。</p>

<p>这里记录以下2021年，首装Ubuntu踩下的坑。如果你恰巧也有一个同样的设备，在这里也能帮助到你。变“废”为宝。</p>

<h2 id="1-看完这部分记录-你将会获得">1. 看完这部分记录 你将会获得</h2>

<ol>
  <li>
    <p>合理的分区:系统、数据分离，可以后期安装任意版本系统不影响数据</p>
  </li>
  <li>
    <p>手动SWAP： 将会比你选择默认安装的方式快很多</p>
  </li>
  <li>
    <p>稳定的wifi的新选择： 探索新的方式解决wifi不稳定的问题</p>
  </li>
  <li>
    <p>学会新的方式安装软件：除了apt还有更多选择</p>
  </li>
  <li>
    <p>默认的多媒体将会工作：也许你一直奇怪为什么默认的视频无法工作。</p>
  </li>
  <li>
    <p>开机莫名其妙的报错将会被修复：看不懂的报错也会被消灭。</p>
  </li>
  <li>
    <p>一些IDE似乎不正常，帮你踩坑：帮助你恢复生产力</p>
  </li>
</ol>

<h2 id="2-设备参考">2. 设备参考</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>参数表：
Intel® Core™ i5-2415M CPU @ 2.30GHz × 4 
3.8 GB 
Intel® HD Graphics 3000 (SNB GT2)
SSD:  Sandisk 240G
</code></pre></div></div>
<p>备注： 我自己更换了一个SSD, 机械硬盘在swap部分的提速效果会大大打折扣。</p>

<h2 id="3-目标系统-ubuntu2010">3. 目标系统 Ubuntu20.10</h2>

<p>我将会安装 <a href="https://ubuntu.com/download/desktop">Ubuntu 20.10</a>。</p>

<p>使用 Ubuntu 20.10 的原因是 他包含了 <a href="https://discourse.ubuntu.com/t/groovy-gorilla-release-notes/15533">相较于Ubuntu20.04诸多改进</a></p>

<h1 id="二安装">二、安装</h1>

<h2 id="1-制作启动盘">1. 制作启动盘</h2>

<p>不多赘述 官方页面里面有不同系统下的 <a href="https://ubuntu.com/download/desktop">制作指导</a>。</p>

<h2 id="2-分区">2. 分区</h2>

<p>Windows XP的时代经常把硬盘分为若干个区，不过现在不论是Windows10、MacOSX都是一个分区了，原因就是现在的系统逐渐稳定了，并且他们也会存在一些云盘、NAS等同步备份数据的外设。所以这部分逐渐不是问题了。</p>

<p>系统和数据隔离还是有好处的，系统破坏了，不影响数据本身。</p>

<h3 id="21-优点">2.1 优点：</h3>

<ul>
  <li>
    <p>系统被破坏，数据不会被影响</p>
  </li>
  <li>
    <p>可以任何时候安装新系统尝鲜，不会影响数据</p>
  </li>
</ul>

<h3 id="22-缺点">2.2 缺点：</h3>

<ul>
  <li>
    <p>系统被局限在一个固定大小的分区里，太小会限制系统后期。</p>

    <p>不过这个无所谓，因为Linux的大小十分的有限。并且安装软件的方式可以灵活的选择 apt（这就是安装在系统分区）或者 snap、flatpak他们都是在用户分区。所以这个缺点理论上不算个缺点。</p>
  </li>
  <li>
    <p>分区导致一部分内存浪费</p>

    <p>这个是事实。但是现在的硬盘也没那么窘迫。后面会建议给系统 50-64G 的空间。</p>
  </li>
</ul>

<h3 id="23-分区教程">2.3 分区教程</h3>

<p>安装时候选择自定义分区。 实际上我们只需要自定义三个分区，也就是删除硬盘空间，新建出三个。</p>

<ul>
  <li>
    <p>/EFI</p>

    <p>新的电脑采用UEFI启动方式，必须设置一个 <code class="language-plaintext highlighter-rouge">/EFI</code> 分区 建议分配大一点，256M 左右。</p>

    <p>Mac采用的就是UEFI 所以我们确保安装成功必须建立一个 <code class="language-plaintext highlighter-rouge">/EFI</code> 分区。</p>

    <p>可以分配 256M 实际上可能占用就 33M 左右。多与的空间留给未来升级或者其他情况的缓冲。</p>

    <blockquote>
      <p>参考</p>
    </blockquote>

    <p>如果是UEFI+GPT分区表模式，那么给ubuntu分区的时候不用设置/boot分区，设置efi系统分区；如果是legacy+MBR分区表那么就要设置/boot分区。</p>

    <p><a href="https://blog.csdn.net/wangyuankl123/article/details/100532620">Ubuntu 经验 ：设置EFI分区</a></p>

    <p>会生成 <code class="language-plaintext highlighter-rouge">/dev/sda1</code></p>
  </li>
</ul>

<h4 id="我们不会特别设置swap分区虽然老的一些wiki里都会这里让你设置没必要在这里设定死">我们不会特别设置SWAP分区，虽然老的一些wiki里都会这里让你设置。没必要在这里设定死。</h4>

<p>swap分区可以没有，进入系统后，灵活的通过swapfile的方式加入SWAP ,这里分配死不好变化了。</p>

<ul>
  <li>
    <p>/ 根 分区，这里用来存放系统。</p>

    <p>目录建议 50～64G</p>

    <p>必须是 primary 分区类型。主分区（Primary）用来安装系统,并且个数有限制。</p>

    <p>精简系统安装在 9G左右，全部安装大概在 17G，后期即使安装文件，也极其有限，64G足够了。</p>

    <p>会生成 <code class="language-plaintext highlighter-rouge">/dev/sda2</code></p>
  </li>
  <li>
    <p>/home 家目录，用户数据所在</p>

    <p>类型可以是 Primary分区或者Logic分区，建议Logic。</p>

    <p>剩余的内存全部分配给 <code class="language-plaintext highlighter-rouge">/home</code> 分区</p>

    <p>会生成 <code class="language-plaintext highlighter-rouge">/dev/sda4</code> (可能我编辑又删除了。应该是递增的。)</p>
  </li>
  <li>
    <p>booter安装选择 /EFI的分区 即 <code class="language-plaintext highlighter-rouge">/dev/sda1</code></p>
  </li>
</ul>

<p><img src="https://i.loli.net/2021/02/06/Dpu4L5IGNlH3gdt.jpg" alt="IMG_20210204_175214.jpg" /></p>

<p>这样就可以正常安装了。</p>

<h2 id="3-我想重装">3. 我想重装</h2>

<p>按照 2 的分区方式。假设我因为更新内核系统崩溃了，或者想要换个发行版怎么办？</p>

<p>没关系，最好保留一个 USB的启动盘。插入电脑重新进入安装流程。在分区的环节，依然选择单独自己设置分区。</p>

<p>你会看到电脑的分区表。和安装时候一样的分布。这里可以通过 <code class="language-plaintext highlighter-rouge">/dev/sda1</code> 等标号对应起来，或者根据大小判断。</p>

<p>需要做的就是把对应的分区设置，挂载。 比如：单独对 <code class="language-plaintext highlighter-rouge">/EFI</code>  <code class="language-plaintext highlighter-rouge">/ </code> 两个分区删除，并且 change 选择 format（其实就是格式化，会出现打钩）。</p>

<h3 id="注意">注意</h3>

<p><code class="language-plaintext highlighter-rouge">/home</code> 挂在上 <code class="language-plaintext highlighter-rouge">/home</code> 分区，但是不要勾选format，也就是不格式化。</p>

<p>然后要注意的是，用户名 即 /home/<xxxx>  这里的xxxx要设置成一样的名字。</xxxx></p>

<p>重新安装完系统后，数据保持，系统更新了。</p>

<h1 id="三配置">三、配置</h1>

<h2 id="1-swap-分区">1. SWAP 分区</h2>

<p>SWAP分区是当年因为设备内存太小，分出一部分硬盘空间用来当内存以此来提高性能的技术。SSD比机械硬盘快，所以这部分如果机器是SSD，效果是更好一点。</p>

<p>Ubuntu安装系统默认的 Swap 分区是 2G，也就是内存的一半。</p>

<p>网上总流传一个 swap 的配置：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    如果内存很小 (&lt;4GB)，设为内存大小

    如果内存很大（&gt;=4GB)，设置为内存的一半
</code></pre></div></div>

<p>实际上时过境迁了，现在随便浏览器开一个标签浏览一个视频网站，你的内存就快速增长。</p>

<p>我这台设备是4G内存，日常使用的时候内存永远是满的状态，然后SWAP也会被塞满。这时候，我猜想Linux会花大量的时间在不断的GC, 当你感觉到系统很卡，应该就是内存分配不过来了。</p>

<p>而且Linux在内存分配产生边界的时候也会产生各种边界问题。</p>

<p>这里建议</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4G 内存，建议分配 8G SWAP

8G 内存，建议 8G SWAP

</code></pre></div></div>

<p>分配SWAP的方式参考 <a href="https://linuxhint.com/change_swap_size_ubuntu/">change_swap_size_ubuntu</a></p>

<p>简述步骤</p>

<ul>
  <li>
    <p>step1 切换为root用户</p>

    <p><code class="language-plaintext highlighter-rouge">sudo -s</code></p>
  </li>
  <li>
    <p>step2 列出 可用的 SWAP</p>

    <p><code class="language-plaintext highlighter-rouge">swapon -s</code></p>
  </li>
</ul>

<p><img src="https://linuxhint.com/wp-content/uploads/2018/11/2-39.png" alt="展示可以用的SWAP" /></p>

<ul>
  <li>
    <p>step3 停用 SWAP</p>

    <p><code class="language-plaintext highlighter-rouge">swapoff -a</code></p>
  </li>
  <li>
    <p>step4 生成一个8G的文件</p>

    <p>bs就是一个单元，1M</p>

    <p>count 是 大小，实际大小是 ` bs* count`</p>

    <p>所以我们需要 8G 是 <code class="language-plaintext highlighter-rouge">1M*1024 * 8 = 8192</code></p>

    <p>所以应该输入命令</p>

    <p><code class="language-plaintext highlighter-rouge">dd if=/dev/zero of=/swapfile bs=1M count=8192</code></p>
  </li>
  <li>
    <p>step5</p>

    <p>启用刚才的swap</p>

    <p><code class="language-plaintext highlighter-rouge">mkswap /swapfile</code></p>

    <p>会生成一个随机ID</p>
  </li>
  <li>
    <p>step6</p>

    <p>挂载swap分区</p>

    <p><code class="language-plaintext highlighter-rouge">swapon /swapfile</code></p>
  </li>
  <li>
    <p>step7</p>

    <p>最好重启系统</p>

    <p><code class="language-plaintext highlighter-rouge">sudo reboot</code></p>
  </li>
  <li>
    <p>step8</p>

    <p>重启系统可以查看</p>

    <p><code class="language-plaintext highlighter-rouge">swapon -s</code></p>

    <p>可以看到新的8G Swap已经在工作。</p>

    <p>或者通过图形软件：系统监视器</p>

    <p>里面可以看到 SWAP 交换区的工作状态</p>
  </li>
</ul>

<h2 id="2-xorg--vs--wayland">2. Xorg  VS  Wayland</h2>

<p>结论：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. Wayland 还有待成熟。

2. 日常使用他们在表现上号无差别。 虽然在原理上 wayland 应该更胜一筹，但是需要时间沉淀（已经快 10 年了）。

3. Wayland 可以尝试，最后还需要 Xorg
</code></pre></div></div>

<p>Wayland的优点：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. 原理上，会比Xorg速度快，因为他简化了X11的模型

2. 也会减少内存和CPU
</code></pre></div></div>

<p>Wayland的缺点：</p>

<p>兼容性：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* 软件的兼容性不太好。而且在最重要的输入法会出现连击的 BUG，可以在系统设置--辅助里面，关闭掉连按按钮。但是不够好。

* 录屏工具 obs-studio 在录制屏幕的时候，Wayland 下不工作，总是黑屏，因为 wayland 的 composite 缺乏一个输出图像的 api …… 总之吧，还缺失很多的细节。
</code></pre></div></div>

<p>开发人员：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* Wayland 的开发人员很少，obs-studio 这个 bug 上 Wayland 的解决也不够积极。这是 2018 年提出的问题，到现在也没解决。
</code></pre></div></div>

<p>实际表现：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* 看过游戏性/能，xorg 和 wayland 差不多。
</code></pre></div></div>

<p>切换Wayland的方法</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. 注销系统，可以选择 wayland 登陆
</code></pre></div></div>

<p><img src="https://l.ruby-china.com/photo/Mark24/2a9fcc19-b124-42bb-ab54-04d9e56c4541.jpg!large" alt="change wayland" /></p>

<h1 id="四硬件与驱动">四、硬件与驱动</h1>

<h2 id="1-wifi">1. Wifi</h2>

<ul>
  <li>
    <p>关于主板自带 wifi Broadcom</p>

    <p>Broadcom 的无线网卡是很多主板上的选择，他虽然在 Ubuntu 上有闭源驱动，可是表现不尽人意。wifi 总是工作一段时间断掉，总让人有一种 Linux 很不稳定的感觉。我因为丢失 wifi 信号重启系统。</p>

    <p>尝试解决方案：</p>

    <p>1.把 wifi 芯片的节能模式设置为 off，永远不断开就可以工作。但是这需要芯片支持。结果不行。</p>
  </li>
  <li>
    <p>小米随身 wifi</p>

    <p>整理自己东西的时候，发现了 2016 年买的小米 wifi 。长的就像一个小的无线鼠标接受器。随身wifi当年是台式机不支持wifi，买一个这个插上去，PC就可以支持wifi了。当年刚出来，驱动都需要额外安装。新东西往往Linux不支持。</p>

    <p>小米随身 wifi, 小度 wifi，360 随身 wifi，他们的方案都一样，都是基于 MT7601U 这款芯片，对是联发科的。外国网友提交了补丁。现在 MTK7601U 这个驱动加入到内核里面了 —— 这玩意免驱的了。</p>

    <p>经过大概四五天的使用，不论是一天开机，隔夜开机，休眠，合盖子。wifi 工作都非常好，唤醒速度非常快，并且热插拔工作。当 wifi 的问题被解决后，系统的直观感受就是稳定多了，没那么多莫名其妙的信号突然丢失，网络突然减速。</p>

    <p>可以说远胜于自身主板的wifi。信号都强2格。</p>
  </li>
  <li>
    <p>可以选择其他的随身wifi</p>

    <p>淘宝上大概20～30不等，也有免驱动的兼容linux的，如果你手边有当年的随身wifi又可以使用了。</p>
  </li>
</ul>

<h1 id="参考">参考：</h1>

<ul>
  <li>
    <p><a href="https://code.woboq.org/linux/linux/drivers/net/wireless/mediatek/">linux/drivers/net/wireless/mediatek</a> linux中加入mtk的驱动列表</p>
  </li>
  <li>
    <p><a href="https://github.com/kuba-moo/mt7601u/blob/master/README.md">mt7601u drivers readme</a></p>
  </li>
</ul>

<h2 id="2-显卡">2. 显卡</h2>

<blockquote>
  <p>这台机器没有独立显卡，这部分没有折腾记录 :D</p>
</blockquote>

<h1 id="五软件使用">五、软件使用</h1>

<h2 id="1-安装软件的新选择">1. 安装软件的新选择</h2>

<p>linux的版本众多，ubuntu这种 debian系默认的使用是apt来安装软件，如果是 Redhat系 比如 CentOS需要用 yum命令。并且两边的软件可能安装和工作的差距很大。</p>

<p>于是出现了磨平兼容性的新的打包和安装方式。</p>

<p>Ubuntu阵营的 <a href="https://snapcraft.io/">snap</a>，如果你安装&gt;=20.04,已经自带了。或者是 RedHat阵营的 <a href="https://flathub.org">flatpak</a>。</p>

<p>他们原理都差不多，类似docker这种，提供了虚拟环境，并且是分层构建的。</p>

<p>Ubuntu也可以安装<a href="https://flatpak.org/setup/">flatpak</a>。</p>

<h3 id="11-snap">1.1 Snap</h3>

<p>一但用过snap估计就会喜欢上了它。网络好的时候速度非常快。感觉snap的基础设施起来了，flatpak依然很慢。</p>

<p>snap会自动保持软件到最新。</p>

<p>你只需要把 apt替换成snap就好了。</p>

<p>在 <a href="https://snapcraft.io/">https://snapcraft.io/</a> 上浏览软件比自带的那个应用商店（做的的是垃圾）好多了。</p>

<h2 id="2-默认播放器缺乏编码器">2. 默认播放器缺乏编码器</h2>

<ul>
  <li>
    <p>step1 勾选 multiverse 源</p>

    <p>打开 “软件和更新（Software &amp; Updates）” Ubuntu软件的tab下，勾选 “有版权和合法性问题的软件（multiverse）”</p>

    <p>然后关闭之后借助图形窗口更新源。或者取消自己去终端手动更新 <code class="language-plaintext highlighter-rouge">sudo apt update</code> 。</p>
  </li>
  <li>
    <p>step2 安装额外包</p>

    <p><code class="language-plaintext highlighter-rouge">sudo apt install ubuntu-restricted-extras</code></p>

    <p>安装过程中需要输入 两个 Y 确认阅读了一些法律然后继续。</p>

    <p>安装完毕后即可正常使用默认播放器</p>

    <blockquote>
      <p>参考</p>
    </blockquote>

    <ul>
      <li><a href="https://www.youtube.com/watch?v=LW8F97qQzVE">Fix Ubuntu Can’t Play Video (MP4, MKV, Etc) Files</a></li>
    </ul>

    <blockquote>
      <p>Plan B</p>
    </blockquote>

    <p>如果你觉得麻烦，可以直接使用  vlc 它自带了编码器。</p>
  </li>
</ul>

<h2 id="梯子">梯子</h2>

<p><a href="https://snapcraft.io/qv2ray">qv2ray</a></p>

<p><code class="language-plaintext highlighter-rouge">sudo snap install qv2ray</code></p>

<h2 id="vscode">Vscode</h2>

<p>snap安装的会出现ibus中文无法输入的情况。 这是Vscode的BUG 不过最近还没被修复。</p>

<p>官网下在deb是解决方案。</p>

<h3 id="deb可能遇到的问题">deb可能遇到的问题</h3>

<p>deb安装的报错</p>

<p>解决方法见： <a href="https://blog.csdn.net/u012057432/article/details/112849575">N: 鉴于仓库…不支持 ‘armhf‘ 体系结构，跳过配置文件 …的获取</a></p>

<h2 id="sublime-text">Sublime Text</h2>

<p>在18.04的时候，sublime无法中文输入。</p>

<p>现在不论是 deb、snap、flatpak都是可以工作的。</p>

<blockquote>
  <p>自带启动命令  subl</p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">subl .</code> 打开目录类似于 vscode 的 <code class="language-plaintext highlighter-rouge">code .</code></p>

<h2 id="jetbrain--ide">JetBrain  IDE</h2>

<p>推荐 snap安装，整个过程无痛，中文输入没有问题。</p>

<h1 id="六其他情况">六、其他情况</h1>

<h2 id="1-开机出问题failed-to-set-mocklistrt报错">1. 开机出问题Failed to set MockListRT……报错</h2>

<p>解决方法</p>

<p>你必须用 grubx64.efi  替换 shimx64.efi</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo su -
cd /boot/efi/EFI/ubuntu
cp grubx64.efi shimx64.efi
reboot

</code></pre></div></div>

<h1 id="七">七</h1>

<p>踩坑还在继续……</p>

<p>逐渐补充</p>

<p>Ruby China 讨论 https://ruby-china.org/topics/40896</p>

<p>V2EX 讨论 https://www.v2ex.com/t/751846</p>

<p>我的博客  https://mark24code.github.io/ubuntu/linux/%E6%95%99%E7%A8%8B/2021/02/06/2021%E5%B9%B4%E7%BB%99%E4%BD%A0%E7%9A%84MacbookPro%E5%AE%89%E8%A3%85Ubuntu%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html</p>

<h1 id="参考-1">参考</h1>

<ul>
  <li>
    <p><a href="https://wiki.gnome.org/Initiatives/Wayland/GnomeShell/GnomeShell4">GnomeShell4</a></p>

    <p>Gnome4的说明，里面指出了Wayland存在一些问题比如输入法、图形输出的问题。而这些问题都需要重新构建Wayland和Gnome。
  这里印证了，输入法连击BUG、OBS-studio无法正常录屏的问题。</p>
  </li>
</ul>

  </div>

  <footer class="article-footer">

  <!-- <section class="share">
  <a class="share-link" href="" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    Twitter
  </a>
  <a class="share-link" href="" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    Facebook
  </a>
  <a class="share-link" href="" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530'); return false;">
    Google+
  </a> 
</section>
 -->


  <section class="author">
  <div class="authorimage box" style="background: url(/assets/img/Mark24.jpg)"></div>
  <div class="authorinfo box">
    <p>Mark24</p>
    <p class="bio">Everything can Mix.</p>
  </div>
</section>


  </footer>

  <!-- disque 评论系统 -->
  <!-- 
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname  = 'mark24code';
    var disqus_identifier = '/ubuntu/linux/%E6%95%99%E7%A8%8B/2021/02/06/2021年给你的MacbookPro安装Ubuntu踩坑记录';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

 -->

  <!-- github comments -->
  <script src="https://utteranc.es/client.js" repo="Mark24Code/mark24code.github.io" issue-term="title" theme="github-light"
    crossorigin="anonymous" async>
  </script>

</article>

          </div>
        </div>
      </div>
      <footer class="site-footer">
  <div class="container" style="padding: 10px 32px;">
    <div class="footer left column one-half">
      <section class="small-font">
        © 2021
        Powered by <a href="https://github.com/jekyll/jekyll">jekyll</a>
      </section>
    </div>

    <!-- <div class="footer right column one-half">
      <section class="small-font">
        
        <a href="https://github.com/Mark24Code"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a>

        
        
      </section>
    </div> -->
  </div>
</footer>

    </div>
    <script>
      (function() {
        var pre = document.getElementsByTagName('pre'),
            pl = pre.length;
        for (var i = 0; i < pl; i++) {
          pre[i].innerHTML = '<span class="line-number"></span>' + pre[i].innerHTML + '<span class="cl"></span>';
          var num = pre[i].innerHTML.split(/\n/).length;
          for (var j = 0; j < (num - 1); j++) {
            var line_num = pre[i].getElementsByTagName('span')[0];
            line_num.innerHTML += '<span>' + (j + 1) + '</span>';
          }
        }
      })();
    </script>
  </body>
</html>
